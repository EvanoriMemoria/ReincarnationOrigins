execute if entity @s[nbt={SelectedItem:{tag:{mob:"Blaze"}}}] run summon minecraft:blaze ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Cave_Spider"}}}] run summon minecraft:cave_spider ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Drowned"}}}] run summon minecraft:drowned ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Husk"}}}] run summon minecraft:husk ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Magma_Cube"}}}] run summon minecraft:magma_cube ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Piglin_Brute"}}}] run summon minecraft:piglin_brute ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Pillager"}}}] run summon minecraft:pillager ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Skeleton"}}}] run summon minecraft:skeleton ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Spider"}}}] run summon minecraft:spider ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Stray"}}}] run summon minecraft:stray ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Vindicator"}}}] run summon minecraft:vindicator ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Wither_Skeleton"}}}] run summon minecraft:wither_skeleton ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Zombie"}}}] run summon minecraft:zombie ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Zombified_Piglin"}}}] run summon minecraft:zombified_piglin ^ ^ ^ {Team:"deathsworn",DeathLootTable:"minecraft:empty",Tags:["carn.deathsworn_minion","carn.temp"],Attributes:[{Name:"generic.max_health",Base:100},{Name:"generic.follow_range",Base:32},{Name:"generic.knockback_resistance",Base:1},{Name:"generic.attack_damage",Base:1},{Name:"generic.armor",Base:1}],"pehkui:scale_data_types":{"pehkui:width":{scale:0.75f},"pehkui:height":{scale:0.75f},"pehkui:hitbox_width":{scale:0.75f}}}

execute at @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] run data modify entity @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] Attributes[{Name:"minecraft:generic.max_health"}].Base set from entity @s SelectedItem.tag.carn.minion_health_tag
execute at @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] run data modify entity @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] Health set from entity @s SelectedItem.tag.carn.minion_health_tag
execute at @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] run data modify entity @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] Attributes[{Name:"minecraft:generic.armor"}].Base set from entity @s SelectedItem.tag.carn.minion_armor_tag
execute at @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] run data modify entity @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] Attributes[{Name:"minecraft:generic.attack_damage"}].Base set from entity @s SelectedItem.tag.carn.minion_attack_damage_tag
execute at @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] run data modify entity @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] Size set from entity @s SelectedItem.tag.Size
execute at @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] run data modify entity @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] IsImmuneToZombification set value 1
execute at @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] run data modify entity @e[tag=carn.deathsworn_minion,distance=..1,sort=nearest,limit=1] CanPickUpLoot set value 1b
execute run power grant @e[tag=carn.deathsworn_minion,distance=..3,sort=nearest,limit=1] reincarnation-origins:deathsworn/minions/kill

execute if entity @s[nbt={SelectedItem:{tag:{mob:"Spider"}}}] run advancement grant @s only reincarnation-origins:deathsworn/spider
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Skeleton"}}}] run advancement grant @s only reincarnation-origins:deathsworn/skeleton
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Wither_Skeleton"}}}] run advancement grant @s only reincarnation-origins:deathsworn/wither_skeleton
execute if entity @s[nbt={SelectedItem:{tag:{mob:"Piglin_Brute"}}}] run advancement grant @s only reincarnation-origins:deathsworn/brute
advancement grant @s only reincarnation-origins:deathsworn/summon

resource change @s reincarnation-origins:deathsworn/soul_bar -5
item modify entity @s weapon.mainhand reincarnation-origins:consume

# Store executing player's current deathswornID
scoreboard players operation carn.player_start_value carn.deathswornID = @s carn.deathswornID

# Set executing player's deathswornID to the current deathswornCounter
scoreboard players operation @s carn.deathswornID = carn.deathswornCounter carn.deathswornID

# Update all existing minion's deathswornID to the current deathswornCounter
execute as @e[tag=carn.deathsworn_minion,limit=10] if score @s carn.deathswornID = carn.player_start_value carn.deathswornID run scoreboard players operation @s carn.deathswornID = carn.deathswornCounter carn.deathswornID

# Set new minion deathswornID equal to executing player's deathswornID
execute as @e[tag=carn.temp,tag=carn.deathsworn_minion,limit=1] run scoreboard players operation @s carn.deathswornID = carn.deathswornCounter carn.deathswornID

# Remove the carn.temp tag
execute as @e[tag=carn.temp,tag=carn.deathsworn_minion,limit=1] run tag @s remove carn.temp

# Add 1 to the deathsworn counter
scoreboard players add carn.deathswornCounter carn.deathswornID 1

execute as @e[tag=carn.deathsworn_minion,limit=10] run power grant @s reincarnation-origins:deathsworn/minion/carn.deathsworn_minion_powers